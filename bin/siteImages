#!/bin/bash

# siteImages

# download all images from this site (tested on OSX)
# cd to _posts dir with your markdown files
# and configure this output dir

out="$HOME/images/siteImages/"

if [ ! -d "$out" ]; then
  echo "Configure output directory, $out not found"; exit
fi

expanded=$(readlink -f ".")
#echo "$expanded"
base=$(basename "${expanded}")
#echo "$base"

if [ "$base" == "_posts" ]
then
echo "ok"
else
echo "before running me, cd to _posts dir"; exit
fi

cat ./* | grep -E '.png)$|.jpg)$|.jpeg)$|.gif)$' | \
grep -Eo '(https?|http)://[^ ")]+' | \
grep -Ev '.th.|b.pwnz|shrani.si\/t\/' | \
wget -N -i - -P "$out"
